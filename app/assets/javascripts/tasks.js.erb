document.addEventListener("turbolinks:load", function(){

    // deadlineDatepicker();
    $("i.i-btn-datepicker").on('click', function(){
       $(this).siblings(".hidden-datepicker").focus();
    })

    $( ".show_blockers ul" ).mouseenter(function(){
        // $( this ).css("background-color","red");
      })
      .mouseleave( function() {
        // $( this ).css("background-color","white");
      })

    $('div[id^="incomplete_tasks_"]').each(function (){
      mySortable($(this));
    })

    droppable_all('li[id^="drop_zone_"]');

});

function mySortable(elem){
 if (elem.is(':visible')){
  elem.sortable({
    update: function(e,ui){
      // send the updated order via ajax
       $.ajax({
           type: "PUT",
           url: $(this).data("url"),
           data: $(this).sortable('serialize'),
       });
    }
  });
  }
}


// sortableCollaborationUsers($('#collaboration-users'));

function sortableCollaborationUsers(elem){
 if (elem.is(':visible')){
  elem.sortable({
    items: "> li",
    axis: "x",
    update: function(e,ui){
      // console.log($(this).data("url"));
      console.log($(this).sortable('serialize'));
      // send the updated order via ajax
       // $.ajax({
       //     type: "PUT",
       //     url: $(this).data("url"),
       //     data: $(this).sortable('serialize'),
       // });
    }
  });
  }
}
