$(document).on('turbolinks:load',function(){


    deadlineDatepicker();

    // $("i#btn-datepicker").on('click', function(){
    //     console.log($(this).siblings(".hidden-datepicker"));
    //    $(this).siblings(".hidden-datepicker").focus();
    // })
    //
    // $( ".show_blockers ul" ).mouseenter(function(){
    //    console.log("in");
    //     $( this ).css("background-color","red");
    //   })
    //   .mouseleave( function() {
    //     $( this ).css("background-color","white");
    //   })


// $("div.no-permitted > ul.menu-option li > a").attr("disabled", "disabled");
// $("div.permitted > ul.menu-option li > a").removeAttr("disabled");
//
// $(document).on("click", 'ul.menu-option li > a',function(e){
//   console.log("1111");
//
//   if ($(this).parents(".no-permitted").length > 0){
//      event.preventDefault();
//      return false;
//      alert("Sorry, you don't have permission for this action");
//   }
// })

})
function deadlineDatepicker(){

  $('.menu-option input.deadline-datepicker').each(function(){
    $(this).datepicker({
      altFormat: "D, d MM",
      minDate: 0,
      onClose: function(){
        var date = $(this).datepicker('getDate');
        console.log(date)
        $.ajax({
          complete:function(request){},
          data:'deadline='+ date,
          dataType:'script',
          type:'PATCH',
          url: $(this).siblings("i.material-icons").attr('data-href')
        })
      }
    });
  });


    $("i#btn-datepicker").on('click', function(){
       $(this).siblings(".hidden-datepicker").focus();
    })

    $( ".show_blockers ul" ).mouseenter(function(){
       console.log("in");
        $( this ).css("background-color","red");
      })
      .mouseleave( function() {
        $( this ).css("background-color","white");
      })
}
